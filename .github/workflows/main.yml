on: [pull_request]

jobs:
  generate_coverage_job:
    runs-on: ubuntu-latest
    name: Example of using Code Coverage action
    steps:
      - name: Generate Code Coverage report
        id: code_coverage
        uses: ./
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          lcov-file: './data/lcov.info'
          head-lcov-file: './data/head-lcov.info'

      - name: Get the output percentage
        run: echo "The percentage ${{ steps.code_coverage.outputs.percentage }}"

      - name: Get the output diff
        run: echo "The percentage diff from head branch ${{ steps.code_coverage.outputs.diff }}"
